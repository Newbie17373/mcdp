<!-- AIzaSyD0zrKhAYAFKvmxCJepXCcsM-C81Q3zRyI -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Chill Dance Player v 0.1</title>
    <link rel="stylesheet" href="./assets/css/pages/index.css" />
    <script src="./assets/js/burger.js" defer></script>
    <script src="./assets/js/checkEnter.js" defer></script>
  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <div class="header__inside container">
          <div class="header__intro">
            <div class="header__logo">
              <img
                src="./assets/img/logo.svg"
                alt=""
                class="header__logo-item"
              />
            </div>
            <h1 class="header__title">MCDP</h1>
          </div>
          <nav class="header__nav">
            <ul class="header__list">
              <li class="header__list-item">
                <a
                  href="https://steady-beignet-63d8ae.netlify.app/#"
                  class="header__list-link"
                  >Main</a
                >
              </li>
              <li class="header__list-item">
                <a href="#" class="header__list-link">About</a>
              </li>
              <li class="header__list-item">
                <a
                  href="https://t.me/Bakerman111"
                  target="_blank"
                  class="header__list-link"
                  >Donate</a
                >
              </li>
              <li class="header__list-item">
                <a href="#" class="header__list-link">Socials</a>
              </li>
              <li class="header__list-item header__list-item_last">
                <div class="header__personal-area">
                  <button class="header__button header__button_header">
                    Sign in/Sign up
                  </button>
                </div>
              </li>
            </ul>
          </nav>

          <div class="header__burger">
            <span></span>
          </div>
        </div>
      </header>
      <div class="main">
        <div class="main__inside">
          <div class="youtube">
            <div class="youtube__inside container">
              <!-- youtube music integration -->
              <h2 class="youtube__title">YouTube Music Integration</h2>

              <div class="youtube__search">
                <label class="youtube__label" for="searchInput">Search:</label>
                <input
                  type="text"
                  id="searchInput"
                  placeholder="Enter your search query"
                />
                <ul class="youtube__menu">
                  <li class="youtube-menu-item">
                    <button
                      id="myButton"
                      class="youtube__button header__button"
                      onclick="searchYouTubeMusic()"
                    >
                      Search
                    </button>
                  </li>
                  <li class="youtube-menu-item">
                    <button
                      class="youtube__button header__button"
                      onclick="clearResults()"
                    >
                      Clear
                    </button>
                  </li>
                </ul>
              </div>
              <ul id="searchResults" class="youtube__search-results"></ul>

              <!-- Add the player container -->
              <div class="youtube__player" id="player"></div>

              <script>
                // Replace 'YOUR_API_KEY' with your actual YouTube Data API key
                const apiKey = "AIzaSyD0zrKhAYAFKvmxCJepXCcsM-C81Q3zRyI";
                const apiUrl = "https://www.googleapis.com/youtube/v3/search";
                const playerContainer = document.getElementById("player");

                function searchYouTubeMusic() {
                  const searchQuery =
                    document.getElementById("searchInput").value;
                  const requestUrl = `${apiUrl}?q=${encodeURIComponent(
                    searchQuery
                  )}&part=snippet&key=${apiKey}&type=video,playlist&maxResults=10`;

                  fetch(requestUrl)
                    .then((response) => response.json())
                    .then((data) => displaySearchResults(data.items))
                    .catch((error) => console.error("Error:", error));
                }

                const searchResultsContainer =
                  document.getElementById("searchResults");

                function clearResults() {
                  searchResultsContainer.innerHTML = "";
                }

                function displaySearchResults(results) {
                  clearResults();

                  results.forEach((result) => {
                    const videoId = result.id.videoId;
                    const title = result.snippet.title;
                    const thumbnailUrl = result.snippet.thumbnails.default.url;

                    const listItem = document.createElement("li");
                    listItem.innerHTML = `
                    <div class="youtube__image">
                      <img class="youtube__image-item" src="${thumbnailUrl}" alt="${title}">
                      </div>
<p class="youtube__title">${title}</p>
<button class="youtube__button header__button" onclick="playVideo('${videoId}')">Play</button>
`;

                    searchResultsContainer.appendChild(listItem);
                  });
                }

                function playVideo(videoId) {
                  const playerHtml = `
<iframe id="youtubePlayer" class="youtube__player-item" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>
<a class="youtube__button header__button" href="https://www.youtubezz.com/watch?v=${videoId}" target="_blank">Download (.mp3 320kbps|| edit & cut .mp3)</a>
`;

                  playerContainer.innerHTML = playerHtml;

                  // Добавим событие 'onload' для iframe, чтобы начать воспроизведение после полной загрузки
                  const youtubePlayer =
                    document.getElementById("youtubePlayer");
                  youtubePlayer.onload = function () {
                    youtubePlayer.contentWindow.postMessage(
                      '{"event":"command","func":"playVideo","args":""}',
                      "*"
                    );
                  };
                }
              </script>
              <!-- youtube music integration end -->
            </div>
          </div>
          <!-- <iframe
            src="https://discord.com/widget?id=1193286923272335502&theme=dark"
            width="350"
            height="500"
            allowtransparency="true"
            frameborder="0"
            sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
          ></iframe> -->
        </div>
      </div>
    </div>
  </body>
</html>
